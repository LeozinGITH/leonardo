<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Listas - TechPanel</title>

<style>
.sidebar {
  width: 100%;
  height: auto;
  position: relative;
}

.main {
  margin-left: 0;
  padding: 15px;
}

.card {
  padding: 18px;
}

input {
  width: 100%;
  padding: 14px;
  font-size: 18px;
  margin-bottom: 10px;
}

button {
  padding: 14px;
  font-size: 18px;
  margin-top: 5px;
}

h1 {
  font-size: 24px;
}

h3 {
  font-size: 20px;
}

li {
  padding: 12px 0;
  font-size: 18px;
}

</style>
</head>

<body>

<div class="sidebar">
  <h2>⚡ TechPanel</h2>
  <a href="dashboard.html">Dashboard</a>
  <a href="relatorios.html">Relatórios</a>
  <a href="configuracoes.html">Configurações</a>
  <a href="usuarios.html">Usuários</a>
</div>

<div class="main">

  <h1>Gerenciador de Listas</h1>

  <div class="card">
    <input type="text" id="newListName" placeholder="Nome da lista">
    <button onclick="createList()">Criar lista</button>
  </div>

  <div id="listsContainer"></div>

</div>

<script>
let lists = JSON.parse(localStorage.getItem("lists")) || [];

function save() {
  localStorage.setItem("lists", JSON.stringify(lists));
}

function createList() {
  const name = document.getElementById("newListName").value;
  if (!name) return;

  lists.push({ name, items: [] });
  document.getElementById("newListName").value = "";
  save();
  render();
}

function addItem(listIndex, inputId) {
  const input = document.getElementById(inputId);
  if (!input.value) return;

  lists[listIndex].items.push({ text: input.value, done: false });
  input.value = "";
  save();
  render();
}

function toggleItem(listIndex, itemIndex) {
  lists[listIndex].items[itemIndex].done =
    !lists[listIndex].items[itemIndex].done;
  save();
  render();
}

function removeItem(listIndex, itemIndex) {
  lists[listIndex].items.splice(itemIndex, 1);
  save();
  render();
}

function deleteList(index) {
  lists.splice(index, 1);
  save();
  render();
}

function render() {
  const container = document.getElementById("listsContainer");
  container.innerHTML = "";

  lists.forEach((list, i) => {
    const div = document.createElement("div");
    div.className = "card";

    div.innerHTML = `
      <h3>${list.name}</h3>
      <button onclick="deleteList(${i})">Excluir lista</button>

      <div class="list-box">
        <input id="input-${i}" placeholder="Novo item">
        <button onclick="addItem(${i}, 'input-${i}')">Adicionar</button>

        <ul>
          ${list.items.map((item, j) => `
            <li class="${item.done ? 'done' : ''}">
              <span onclick="toggleItem(${i}, ${j})">${item.text}</span>
              <button onclick="removeItem(${i}, ${j})">X</button>
            </li>
          `).join("")}
        </ul>
      </div>
    `;

    container.appendChild(div);
  });
}

render();
</script>

</body>
</html>
